<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://getbootstrap.com/docs/5.3/assets/css/docs.css" rel="stylesheet">
  <title>Cracks</title>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://kit.fontawesome.com/9cb825050b.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="../static/styles.css">
  <link rel="icon" href="../static/cracks-favicon-color.png">
  
</head>

<body>
  <nav class="navbar navbar-expand-lg bg-info">
    <div class="container-fluid">
      <a class="navbar-brand" href="/home_user"><img src="../static/cracks-favicon-black.png" alt="" style="height: 35px;">Cracks</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown"
        aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNavDropdown">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" aria-current="page" href="/kvm"><i class="fa-solid fa-laptop"></i>KVM</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/services"><i class="fa-solid fa-house-laptop"></i>Service (CMS)</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/database"><i class="fa-solid fa-database"></i>DataBase</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/storage"><i class="fa-solid fa-hard-drive"></i>Storage</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/user_account"> <i class="fa-sharp fa-solid fa-user-pen"></i>Account</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/logout"><i class="fa-solid fa-arrow-right-from-bracket"></i>Log Out</a>
          </li>

        </ul>
      </div>
                <div class="navbar-text ml-auto">
                  <i class="fa-solid fa-user"> {{username}}</i>
                </div>
    </div>
  </nav>

  <br>

  <div class="h-100 d-flex align-items-center justify-content-center">
    <h1>¡Bienvenido al servicio de CMS!</h1>
  </div>



  
  <div class="container mt-4">
    <h2>Lista de Servicios</h2>

    {% for service in info %}
    {% if loop.index0 % 2 == 0 %}

    <div class="row mt-3">
    {% endif %}
        <div class="col-md-6">
            <div class="card">
                <div class="card-body">
                    <div class="row">
                        
                        <div class="col-md-12 border border-light bg-warning-subtle">
                            <h5 class="card-title text-center"><strong>Service Name: <span style="color: red;">{{ service.service_name }}</span></strong></h5>
                            <p class="card-text"><strong>Tipo de CMS:</strong> {{ service.cms_type }}</p>
                            <p class="card-text"><strong>Usuario de la base de datos:</strong> {{ service.cms_db_user }}</p>
                            <p class="card-text"><strong>Contraseña de la base de datos:</strong> {{ service.cms_db_password }}</p>
                            <p class="card-text"><strong>Contraseña de root:</strong> {{ service.cms_root_password }}</p>
                            <p class="card-text"><strong>IP:</strong> {{ service.ip }}</p>
                            <p class="card-text"><strong>Puerto:</strong> {{ service.puerto }}</p>
                            <p class="card-text"><strong>Estado:</strong> {{ service.state }}</p>
                        </div>

                    </div>

                    <div class="row">     
                          <div class="col-md-12 border border-info">
                            {% if service.cms_type == "wordpress" %}
                                <img src="../static/wordpress.png" class="img-fluid cms-image" alt="WordPress">
                            {% elif service.cms_type == "drupal" %}
                                <img src="../static/drupal.png" class="img-fluid cms-image" alt="Drupal">
                            {% elif service.cms_type == "joomla" %}
                                <img src="../static/joomla.png" class="img-fluid cms-image" alt="Joomla">
                            {% elif service.cms_type == "prestashop" %}
                                <img src="../static/prestashop.png" class="img-fluid cms-image" alt="PrestaShop">
                            {% endif %}
                          </div>
                    </div>  
<br>
                    <div class="row">
                        <div class="col-md-12">

                            {% if service.state == "started" %}
                            <a href="/stop_service/{{ service.service_name }}" class="btn btn-danger stop-service-btn">Detener</a>
                            <a href="/delete_service/{{ service.service_name }}" class="btn btn-warning">Eliminar</a>
                            
                            <!-- URL --> 
                            <h4>URL Access CMS: <a href="http://{{ service.ip }}:{{ service.puerto }}" target="_blank">http://{{ service.ip }}:{{ service.puerto }}</a></h4>   
                            
                            {% elif service.state == "stopped" or service.state == "created" %}
                                <a href="/start_service/{{ service.service_name }}" class="btn btn-primary start-service-btn">Iniciar</a>
                                <a href="/delete_service/{{ service.service_name }}" class="btn btn-warning">Eliminar</a>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    {% if loop.index0 % 2 == 1 or loop.last %}
    </div>
    {% endif %}
    {% endfor %}
</div>



  <div class="position-fixed bottom-0 end-0 m-4">
    <a href="/service_create" class="btn btn-primary btn-lg">Create CMS</a>
  </div>


  
</body>

</html>